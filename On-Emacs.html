<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-04-12 Sun 10:00 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>On Emacs</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="./assets/css/notes.css">
<link rel="stylesheet" href="./assets/css/scaffold.css">
<script data-goatcounter="https://neeasade.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">On Emacs</h1>
<div class="org-center">
<p>
[ <a href="https://github.com/neeasade/neeasade.github.io/commits/source/posts/2019-12-06-On-Emacs.org">2020-04-10</a> | 2019-12-06 ]
</p>
</div>

<p>
This post is a short love letter to emacs, the text editor that has changed the way I do my daily computing for a few years now. You can find my config <a href="https://github.com/neeasade/emacs.d">here</a>.
</p>

<p>
Disclaimer: At the end of the day, a text editor is just a preference, just like mechanical keyboards, vim bindings, window managers and what have you.
</p>

<div id="outline-container-orgcb66db7" class="outline-2">
<h2 id="orgcb66db7">Programmable state</h2>
<div class="outline-text-2" id="text-orgcb66db7">
<p>
Emacs state is a long running emacs lisp repl, with all variable and function assignments tracked in a global environment. This has a few negatives, such as the naming conflict potential of all elisp code, and that any running elisp can affect emacs state (say, freeze the entire experience). However, the benefit of being able to peek and tweak any elisp code live is huge. You can connect or fix elisp packages together in ways not imagined by the authors through that global repl, and see changes instantly, with a very low bar for hackery. The resulting footgun is both the best and worst computing experience I think I'll have for quite awhile.
</p>
</div>
</div>

<div id="outline-container-org7d5d764" class="outline-2">
<h2 id="org7d5d764">Blended environment</h2>
<div class="outline-text-2" id="text-org7d5d764">
<p>
Emacs can be thought of as a toolkit for integrating textual data into a higher level interface, with an API for shaping that data into emacs primitives. Things like buffers, windows, the point, overlays, and major modes are all programmatically available in the expressive emacs lisp language. Combine this with the programmable global state in emacs and you get a very 'flowey' feeling when you switch between different interfaces all using the same UI primitives. I like to contrast this to the rise of many TUI tools for doing things in the terminal in recent years &#x2013; having to learn different keybinds and mental models for each of them (<code>ncmpcpp</code>, <code>tig</code>, <code>mutt</code>, <code>ranger</code>, <code>weechat</code>, &#x2026;) is more overhead for me than using the emacs equivalents and getting the benefit of a consistent interface.
</p>
</div>
</div>

<div id="outline-container-orgeae95da" class="outline-2">
<h2 id="orgeae95da">Emacs lisp</h2>
<div class="outline-text-2" id="text-orgeae95da">
<p>
Emacs lisp is the first lisp I've used for more than 10 seconds, because you're forced to if you want to configure emacs. Having used it for a few years within emacs now, the expressive nature of lisp has grown on me to the extent it shapes how I program in most other languages (possibly in danger of being a <a href="http://wiki.c2.com/?SmugLispWeenie">smug lisp weenie</a>). The semantic nature of lisp means you can always reshape things to get a better view of the problem you are trying to solve, and macros allow you to do so cheaply.
</p>
</div>
</div>

<div id="outline-container-orgdab443a" class="outline-2">
<h2 id="orgdab443a">Fun things I've done with emacs</h2>
<div class="outline-text-2" id="text-orgdab443a">
</div>
<div id="outline-container-org035982d" class="outline-3">
<h3 id="org035982d">Shell stuff</h3>
<div class="outline-text-3" id="text-org035982d">
</div>
<div id="outline-container-orgc359c04" class="outline-4">
<h4 id="orgc359c04"><code>shell-mode</code> as my terminal, with a staged shell buffer</h4>
<div class="outline-text-4" id="text-orgc359c04">
<p>
When I first start emacs, I create an 'on-deck' staged shell buffer with an interactive shell. Then when I 'spawn a terminal', what I'm actually doing is:
</p>

<ul class="org-ul">
<li>making a new emacs frame</li>
<li>picking up the staged shell buffer and renaming it</li>
<li>staging the next shell buffer for a future pickup</li>
</ul>

<p>
This means there is no startup time or delay on the part of the shell for me to get going. It also means I can pickup the staged shell from other contexts, like <code>dired</code> (spawn a shell in the current directory from the existing staged buffer).
</p>
</div>
</div>

<div id="outline-container-org4ef5f9a" class="outline-4">
<h4 id="org4ef5f9a">Shell $CWD history</h4>
<div class="outline-text-4" id="text-org4ef5f9a">
<p>
Everytime my prompt prints, it prints a key string for emacs shell to pickup, setting the current directory of the emacs shell buffer sync'd from the bash shell. These values are tracked in a persisent list, so that I can jump to any folder location I've ever been using ivy. Sorting order keeps frequently picked folders near the top with the help of <a href="https://github.com/raxod502/prescient.el">ivy-prescient</a>.
</p>
</div>
</div>

<div id="outline-container-orgeae90b1" class="outline-4">
<h4 id="orgeae90b1">Scripts and functions</h4>
<div class="outline-text-4" id="text-orgeae90b1">
<p>
An <code>elisp</code> script that obfuscates the details of connecting to the running emacs server to interact with it, allowing me to peek at emacs state or do things in emacs from a script or shell:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ elisp <span style="color: #66BB6A;">'(message "hello from the shell")'</span>
</pre>
</div>

<p>
A function <code>shellshot</code> that lets me take a 'text screenshot' of the current shell window contents for pastebins or sharing output:
</p>

<div class="org-src-container">
<pre class="src src-text">$ uname -a
Linux bridge 4.19.86 #1-NixOS SMP Sun Nov 24 07:21:09 UTC 2019 x86_64 GNU/Linux
$ ps
  PID TTY          TIME CMD
 7217 pts/19   00:00:00 bash
 7538 pts/19   00:00:00 ps
$ emacs --version
GNU Emacs 26.3
Copyright (C) 2019 Free Software Foundation, Inc.
GNU Emacs comes with ABSOLUTELY NO WARRANTY.
You may redistribute copies of GNU Emacs
under the terms of the GNU General Public License.
For more information about these matters, see the file named COPYING.
$ shellshot
</pre>
</div>

<p>
A script <code>fzf</code> that intercepts <a href="https://github.com/junegunn/fzf">fzf</a> calls and redirects them to be emacs ivy-read calls
</p>

<div class="org-src-container">
<pre class="src src-text">$ echo $ESHELL
true
$ mpc listall | fzf
import/Vapor Memory/Windows&#24417;96  - Gradient Horizont.opus
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-org966713d" class="outline-3">
<h3 id="org966713d">Org pomodoro status</h3>
<div class="outline-text-3" id="text-org966713d">
<p>
Org mode is a markup format deeply integrated into emacs (the elisp code is the reference implementation). It's what I'm writing the post in. At it's core, org-mode is about headings and metadata around headings. I have a bind to toggle an 'active' heading, and with org-pomodoro I can toggle commands to signal pomodoro breaks, or query the current state in a script for my panel:
</p>

<div class="org-src-container">
<pre class="src src-text">$ org_task
Write 'On Emacs' &#9632;&#9632;&#9632;&#9633;&#9633;&#9633;&#9633;&#9633;&#9633;&#9633;
</pre>
</div>
</div>
</div>

<div id="outline-container-org9ff3a77" class="outline-3">
<h3 id="org9ff3a77">Contextual inline eval for lisps</h3>
<div class="outline-text-3" id="text-org9ff3a77">
<p>
I have a lisp eval function that will have different targets in different situations. When on an empty line, it will eval the last s expression. When on a not-empty line, it will eval the top s expression. And if there is anything highlighted, it will eval the region. This means I have just one eval keybind to mash. And with <a href="https://github.com/xiongtx/eros">eros</a> I get sexy inline eval results!:
</p>


<div class="figure">
<p><a href="./assets/posts/eros.png"><img src="./assets/posts/eros.png" alt="eros.png" /></a>
</p>
</div>
</div>
</div>

<div id="outline-container-orgb715fb4" class="outline-3">
<h3 id="orgb715fb4">IRC + highlight buffer</h3>
<div class="outline-text-3" id="text-orgb715fb4">
<p>
I created a derived text mode for irc highlights that allows me to jump to mentions.
</p>


<div class="figure">
<p><a href="./assets/posts/circe.png"><img src="./assets/posts/circe.png" alt="circe.png" /></a>
</p>
</div>
</div>
</div>


<div id="outline-container-org2c3ba48" class="outline-3">
<h3 id="org2c3ba48">Meta file switcher</h3>
<div class="outline-text-3" id="text-org2c3ba48">
<p>
I created a 'goto file' function that combines:
</p>

<ul class="org-ul">
<li>recent files</li>
<li>files in current project (or optionally files in all open projects)</li>
<li>open files</li>
</ul>

<p>
And then I just have to fuzzy type to get to a matching file.
</p>
</div>
</div>

<div id="outline-container-org307dd1b" class="outline-3">
<h3 id="org307dd1b">Meta GOTO thing</h3>
<div class="outline-text-3" id="text-org307dd1b">
<p>
I have a function that will follow 'thing' at point, handling:
</p>

<ul class="org-ul">
<li>urls</li>
<li>filepaths (relative or absolute, and jump to line number)</li>
<li>definitions for various languages (see <a href="https://github.com/jojojames/smart-jump">smart jump</a>)</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org5f93c97" class="outline-2">
<h2 id="org5f93c97">Other</h2>
<div class="outline-text-2" id="text-org5f93c97">
<p>
<a href="https://nixers.net/showthread.php?tid=2216&amp;pid=19558#pid19558">https://nixers.net/showthread.php?tid=2216&amp;pid=19558#pid19558</a>
</p>


<div class="org-center">
<p>
[ <a href="./index.html">Index</a> | <a href="https://neeasade.net">Root</a> | <a href="https://raw.githubusercontent.com/neeasade/neeasade.github.io/source/posts/2019-12-06-On-Emacs.org">Source</a> | <a href="https://notes.neeasade.net/sitemap.html">Sitemap</a> ]
</p>
</div>
</div>
</div>
</div>
</body>
</html>
